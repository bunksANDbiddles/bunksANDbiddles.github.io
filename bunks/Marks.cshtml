@{  
    
       
             if (!WebSecurity.IsAuthenticated)     
                {        
                    string currentUrl = Request.Url.ToString();         
                    Response.Redirect("~/Account/Login?sender=" + currentUrl);     
                }         
    
    Layout = "~/Shared/Layouts/_Layout.cshtml"; 
    
     
    Page.Title = "Marks";  
      var db = Database.Open("BunksAndBiddlesSchool");  
    
     var sqlSelectPaces = "SELECT * FROM Paces;";
             var sqlSelectTeacher = "SELECT teacherName FROM Teachers " ;
              
             
             var sqlSelectSubjects = "SELECT * FROM Subjects;";
               var sqlSelectCommentTitle = "SELECT * FROM subjectComment;";
              var sqlSelectExtraCurricular = "SELECT * FROM ExtraCurricular;";
                   
    // Create a blank cart in Session if not present     
    if (Session["marks"] == null)     
    {         
        Session["marks"] = new Marks();     
    }          
    // Get current cart from Session     
   Marks marks = (Marks)Session["marks"]; 

    
    
 
      

    var sqlSelectReport = "SELECT * FROM ExtraCurricularResults " +
                    "LEFT OUTER JOIN SupervisorProfile ON ExtraCurricularResults.SupervisorID = SupervisorProfile.SupervisorID " +
                    "RIGHT OUTER JOIN Students ON ExtraCurricularResults.studentID = Students.studentID " +
                    "WHERE ExtraCurricularResults.SupervisorID = SupervisorProfile.SupervisorID " +
                    "ORDER BY ExtraCurricularResults.extraCurricularResultID Desc ";
    var report = db.Query(sqlSelectReport);
    var reportGrid = new WebGrid(report, ajaxUpdateContainerId : "grid", defaultSort: "teacherName", rowsPerPage: 10 );
   

   if (IsPost)
   {
       if (Request["studentID"] != null) 
       {

           // Form posted from Student Details Page
           var studentID = Request["studentID"];
           var admissionNo = Request["admissionNo"];
           

           marks.AddStudent(studentID.AsInt(), admissionNo);
       }
       else if (Request["removeIndex"] != null)
       {
           // Form posted by Marks Remove Student Button
           var removeIndex = Request["removeIndex"].AsInt();
           marks.RemoveStudent(removeIndex);
       }
   }
   
   } 





     <button id="extraCurricularTab" style="width:300px; height:50px; float:right; background:#3a3a3c; color: white; font-size:large;"class="win-button" >
                    ExtraCurricular  &#xE1F7;
                    </button>
<h1 class="win-type-subheader" style=" color: white; text-align: center">View all list here</h1>
<h2 class="win-type-body" style=" color: white; text-align: center">See marks and P.A.C.E reports from supervisors + all extracurricular activities reports </h2>
      <div id="headerSectionOutput">
        <div id="headerSectionOutput1">

    <p class="win-type-title">Marks + Comments </p>

  <div id="grid" class="ui-widget">
        @RenderPage("~/Shared/partials/PaceResultGrid.cshtml")
    </div>


</div>
<div id="headerSectionOutput2">
 <p class="win-type-title">ExtraCurricular Activities + Comments </p>

 @reportGrid.GetHtml( tableStyle: "webgrid", headerStyle:"header", 
                    alternatingRowStyle:"alt", columns: reportGrid.Columns (reportGrid.Column("teacherName", canSort: true),
                         reportGrid.Column("admissionNo"),
                        reportGrid.Column("extraCurricularTitle"),
                       reportGrid.Column("comment") 
   
)
)
</div>
          </div>

  <div id="cartButtons">             
       
      
      <a href="/Default" ><div data-win-control="WinJS.UI.NavBarCommand" style=" color:#295598; width: 150px;" data-win-options="{ label: 'Continue Recording?', icon: '&#xE14B;' }">
       </div></a>             
              
  </div>

    <div id="dialogAcademicForm-edit" class="details" >
    <form id="edit-marks-form" action="@Href("~/Methods/UpdateMarks")">
        <fieldset>
                                    <p class="win-type-title" style="color: #808080; padding: 0em 0.5em;">Subject &amp; Pace</p>
                                    <div class="detailColumn">


                                        <select id="edit-paceNo" name="paceNo" class="win-dropdown" style="font-size:x-large; margin: 1em; ">
                                              <option value="">Pace Number</option>
                                @{ 
                                   foreach (var paceID in db.Query(sqlSelectPaces)){
                                       if(paceID.paceId == Request["paceNo"].AsInt()){
                                             <option style="font-size:x-large">@paceID.paceNo</option>
                                        } else {
                                             <option style="font-size:x-large">@paceID.paceNo</option>
                                        }

                                   }
  
                                            }

                                              

                                            
                                        </select>

                                        <select id="edit-teacherName" name="teacherName" class="win-dropdown" style="font-size:x-large; margin: 1em; ">
                                              <option value="">Supervisor</option>
                                         @{ 
                                   foreach (var teacherID in db.Query( sqlSelectTeacher)){
                                     
                                             <option  style="font-size:x-large">@teacherID.teacherName</option>
                                        

                                   }
  
                                            }
                                        
                                        
                                        </select>

                                        <select id="edit-subjectName" name="subjectName" class="win-dropdown" style="font-size:x-large">
                                             <option value="">Subject</option>
                                            @foreach (var subjectID in db.Query(sqlSelectSubjects))
                                            {

                                                <option style="font-size:x-large">@subjectID.subjectName</option>

                                            }
                                        </select>
                                   
                                       <ul class="input-list style-1 clearfix">
                                        <li>
                                        <input   class="focus" type="hidden" size="13"  id="edit-admissionNo" name="admissionNo"  />  
                          
                                         </li>
                                       </ul>
                                     
                                         
                                   
                                    </div>
                                  
                                     <p class="win-type-title" style="color: #808080; padding: 0em 0.5em;">Record Mark</p>
                                        <div class="detailColumn">
                                            <ul class="input-list style-1 clearfix">
                                            <li>
                                            <input   type="hidden" size="2" id="edit-studentID" name="studentID"  class="focus" />
          </li>
          <li>
           
                <input   class="focus" type="hidden"   id="edit-SupervisorID" name="SupervisorID"  /> 
              <input type="hidden" id="edit-paceResultID" name="paceResultID" />
          </li>
          
         <li>
                           <input type="number" class="focus"   id="edit-score" name="score" />
                           </li>



                         
        </ul>
                                              

                                     
                             </div>
                          
                      
                                </fieldset>      
        </form>
    </div>


<script type="text/javascript" src="../js/Marks.js"></script>

<script type="text/javascript" src="../js/paceResultUpdate.js"></script>