@{          
    if (!WebSecurity.IsAuthenticated)     
    {        
        string currentUrl = Request.Url.ToString();         
        Response.Redirect("~/bunks/Account/Login?sender=" + currentUrl);     
    } 
            
            
    Layout = "~/bunks/Shared/Layouts/_LayoutKinder.cshtml"; 
                     
    var pupilID = !UrlData[0].IsEmpty() ? UrlData[0] : "0"; 
                     
   var db = Database.Open("BunksAndBiddlesSchool");        
   var sqlSelect = "SELECT * FROM Pupils WHERE pupilID = @0"; 

     var sqlSelectKinderSubjects = "SELECT * FROM KindergartenSubjects";
          
    var pupil = db.QuerySingle(sqlSelect, pupilID);  

     var sqlSelectLife = "SELECT * FROM AreasPracticalLife "; 
     var sqlSelectPracticalLife = "SELECT * FROM PracticalLife WHERE practicalLifeID = '1' ";         
    var sqlSelectGoals = "SELECT goalTitle FROM practicalLifeGoals " +
                "LEFT OUTER JOIN PracticalLife ON practicalLifeGoals.practicalLifeID = PracticalLife.practicalLifeID  " +
                "RIGHT OUTER JOIN AreasPracticalLife ON practicalLifeGoals.areaID = AreasPracticalLife.areaID " + 
                "WHERE PracticalLifeGoals.term = '1' ";

    var goals = db.Query(sqlSelectGoals);

    var  sqlSelectSubActivity = "SELECT * FROM SubActivities";

    var practicalLife = db.Query(sqlSelectLife);

    var practicalLifeCategory = db.Query(sqlSelectPracticalLife);

      var subActivities = db.Query(sqlSelectSubActivity);    
   
            } 

@if (pupil == null)
 {     
    <p>
        Unable to fetch Student details.         
        Try browsing one of the Learning Centers listed to the left.   
          
    </p> 

         } 
else {
    
		
     Page.Title = pupil.otherNames;

    <text>

                    
                   <img  height="165px" src="~/bunks/bunks/images/Bunksandbiddleslogocolour.png" alt="bunkslogo">

                    <img style="float:right;" height="200px" src="~/bunks/bunks/img/seal.jpg" alt="bunkslogo">
                     <div class="ui divider"></div>
                     <h1  class="win-type-subtitle">PROGRESS REPORT </h1>
                     <h1  class="win-type-subtitle">BBS/KINDER/R010 </h1>
                  <br/>
              <h2 class="win-type-subtitle">NEXT TERM BEGINS : 9th January, 2017</h2>
                     <br/>
             <h2 class="win-type-subtitle">Term: One 2016/2017</h2>
                     <br/>
             <h2 class="win-type-subtitle">Class: Pre-School Kifaru Class </h2>
                     <br/>
            <h2 class="win-type-subtitle">Supervisor: Ms. Eunice Kamari </h2>
                     <br/>

              <p class="win-type-title" style="color:#ef4135;">
              <b>@pupil.firstName @pupil.otherNames</b>
             </p>

                 
                            <section class="grading-section ">

                                <div class="grading grading--subject">

  @foreach (var reportID in db.Query(sqlSelectKindergartenReport, pupilID))
                                        {


                        
                                     <div class="grading__item">
                                        <h3 class="grading__title ">@reportID.activity </h3>
                                            <div class="grading__price">
                                               
                                                <div class="headerColumn">
                                                     <p class="grading__currency"><u>Activities achieved by @pupil.firstName</u></p>
                      <p style="font-size: small; text-align: start;" class="grading__title "> @reportID.goals </p>
                                                </div>
                                            </div>


                                            <small class="win-type-body grading__sentence">@reportID.subjectComment </small>
                                           <small>@reportID.teacherName 's Comment</small>
                                         </div>
                                  
                                        }

  

                                     </div>
                            

                                 <ul  class="kinderList">
  @foreach (var extraCurricularReportID in db.Query(sqlSelectExtraCurricularResults, pupilID))
                                        {


                           <li >
                                   <div class="grading grading--subject">
                                     <div class="grading__item">
                                        <h3 class="grading__title ">@extraCurricularReportID.extraCurricularTitle </h3>
                                            <div class="grading__price">
                                               
                                             
                                            </div>


                                            <p class="win-type-body grading__sentence">@extraCurricularReportID.Comment </p>
                                           <small>@extraCurricularReportID.teacherName 's Comment</small>
                                         </div>
                                       </div>
                                   </li>
                                        }

     </ul>
                            
                            
                            </section>

                          

                      @foreach (var generalCommentID in db.Query(sqlSelectComments, pupilID))
                                        {


                           <section class="grading-section ">
                                   <div class="grading grading--subject">
                                     <div >
                                        <h3 class="grading__title ">@generalCommentID.CommentTitle </h3>
                               
                                            <p class="win-type-body grading__sentence">@generalCommentID.comment </p>
                                          
                                          <div class="grading__price">
                                          <p>Days Absent: <b> @generalCommentID.daysAbsent</b></p>   
                                            </div>
                                          <div class="grading__price">
                                          <p id="daysAttended"></p>
                                            </div>
                                         </div>
                                       </div>
                                </section>
                                  
                                        }


</text>
}

